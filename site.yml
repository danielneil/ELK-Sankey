---

- name: Rolling out common configuration
  hosts: all
  become: true
  gather_facts: yes
  
  roles:
   - common

- name: Installing ELK-Sankey Platform (Elasticsearch)
  hosts: elasticsearch-server
  gather_facts: yes
  become: true

  roles:
   - elasticsearch

- name: Installing ELK-Sankey Platform (kibana - resides on the elasticsearch server)
  hosts: kibana-server
  gather_facts: yes
  become: true
  
  roles:
   - kibana

- name: Installing ELK-Sankey Platform (Filebeat - resides on the collection endpoint system)
  hosts: filebeat-server
  gather_facts: yes
  become: true

  roles:
   - filebeat
   - data-generation
